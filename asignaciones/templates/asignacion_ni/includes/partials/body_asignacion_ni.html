<tr>
  <th scope="row">{{ object.id }}</th>
  {% if object.ni_asignador %}
    <td><a href="{% url 'users:detail_perfil' object.ni_asignador.slug %}">{{ object.ni_asignador }}</a></td>
  {% else %}
    <td>{{ object.ni_asignador }}</td>
  {% endif %}
  {% if object.ni_ingeniero %}
    <td><a href="{% url 'users:detail_perfil' object.ni_ingeniero.slug %}">{{ object.ni_ingeniero }}</a></td>
  {% else %}
    <td>{{ object.ni_ingeniero }}</td>
  {% endif %}
  {% if object.fm_supervisor %}
    <td><a href="{% url 'users:detail_perfil' object.fm_supervisor.slug %}">{{ object.fm_supervisor }}</a></td>
  {% else %}
    <td>{{ object.fm_supervisor }}</td>
  {% endif %}
  <td><a href="{% url 'estaciones:detail_estacion' object.estacion.pk %}">{{ object.estacion }}</a></td>
  <td>{{ object.actividad.banda}}</td>
  <td>{{ object.actividad.proyecto}}</td>
  <td>{{ object.actividad.escenario}}</td>
  <td>{{ object.actividad.tipo_trabajo}}</td>
  <td>{{ object.actividad }}</td>
  <td><a href="{% url 'actividades:detail_actividad' object.actividad.pk %}">{{ object.wp }}</a></td>
  <td>{{ object.actividad.estado_noc }}</td>
  <td>
    {%  if object.conceptos_ni.all %}
      <a href="{% url 'conceptos:list_concepto_ni_asignacion' object.pk %}">conceptos ni</a>
    {% else %}
      None
    {% endif %}
  </td>
  <td>
    {%  if object.solicitudeshw.all %}
      <a href="{% url 'solicitudeshw:list_solicitudhw_asignacion' object.pk %}">solicitudes hw</a>
    {% else %}
      None
    {% endif %}
  </td>
  <td>{{ object.estado_asignacion }}</td>
  <td>{{ object.origen_falla }}</td>
  <td>{{ object.tipo_intervencion }}</td>
  <td>{{ object.fecha_asignacion }}</td>
  <td>{{ object.creado }}</td>
  <td>{{ object.actualizado }}</td>
  {% if object.estado_asignacion == 'Asignada' or object.estado_asignacion == 'En monitoreo' %}

    {% if perms.users.perm_ni_asignador or perms.users.perm_fm_lider or perms.users.perm_gap_administrador %}
      <th>
        <!-- <a href="{% url 'asignaciones:update_asignacion_ni' object.pk %}" class="fm-update btn btn-success btn-sm" role="button" data-fm-head="Actualizar Asignacion NI" data-fm-callback="reload">Actualizar</a> -->
        <a onclick="return update_asignacion_ni('{% url 'asignaciones:update_asignacion_ni_asignador' object.pk %}')" class="btn btn-success btn-sm" role="button">Actualizar</a>
      </th>
    {% elif perms.users.perm_ni_ingeniero %}
      <th>
        <!-- <a href="{% url 'conceptos:create_concepto_ni' object.pk %}" class="fm-create btn btn-primary btn-sm" role="button" data-fm-head="Crear Concepto NI" data-fm-callback="reload">Concepto</a> -->
        <a onclick="return create_concepto_ni('{% url 'conceptos:create_concepto_ni' object.pk %}')" class="btn btn-primary btn-sm" role="button">Concepto</a>
      </th>
      <th>
        <a onclick="return create_solicitudhw('{% url 'solicitudeshw:create_solicitudhw' object.pk %}')" class="btn btn-primary btn-sm" role="button">Solicitud HW</a>
      </th>
      <th>
        <!-- <a href="{% url 'asignaciones:update_asignacion_ni_ingeniero' object.pk %}" class="fm-update btn btn-success btn-sm" role="button" data-fm-head="Actualizar Asignacion NI" data-fm-callback="reload">Actualizar</a> -->
        <a onclick="return update_asignacion_ni('{% url 'asignaciones:update_asignacion_ni_ingeniero' object.pk %}')" class="btn btn-success btn-sm" role="button">Actualizar</a>
      </th>
    {% else %}
    {% endif %}

  {% else %}
  {% endif %}
</tr>
